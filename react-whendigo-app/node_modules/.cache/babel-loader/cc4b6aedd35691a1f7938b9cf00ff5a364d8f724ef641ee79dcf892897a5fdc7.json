{"ast":null,"code":"import _defineProperty from\"C:/Users/hjohnston/OneDrive - Neumont College of Computer Science/Documents/GitHub/WhendigoOccurances/react-whendigo-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/hjohnston/OneDrive - Neumont College of Computer Science/Documents/GitHub/WhendigoOccurances/react-whendigo-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/hjohnston/OneDrive - Neumont College of Computer Science/Documents/GitHub/WhendigoOccurances/react-whendigo-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Update(){var _useParams=useParams(),itemId=_useParams.itemId;var navigate=useNavigate();var _useState=useState({postDate:'',postBody:'',postImg:null}),_useState2=_slicedToArray(_useState,2),updatedItem=_useState2[0],setUpdatedItem=_useState2[1];useEffect(function(){fetch(\"http://localhost:3666/post/\".concat(itemId)).then(function(response){return response.json();}).then(function(data){setUpdatedItem({postDate:data.postDate,postBody:data.postBody,postImg:null});}).catch(function(error){console.error('Error fetching item data:',error);});},[itemId]);var handleInputChange=function handleInputChange(e){setUpdatedItem(_objectSpread(_objectSpread({},updatedItem),{},_defineProperty({},e.target.name,e.target.value)));};var handleImageUpload=function handleImageUpload(e){var imageFile=e.target.files[0];setUpdatedItem(function(prevItem){return _objectSpread(_objectSpread({},prevItem),{},{postImg:imageFile});});};var handleUpdate=function handleUpdate(e){e.preventDefault();var formData=new FormData();formData.append('postDate',updatedItem.postDate);formData.append('postBody',updatedItem.postBody);formData.append('postImg',updatedItem.postImg);fetch(\"http://localhost:3666/post/update/\".concat(itemId),{method:'PUT',body:formData}).then(function(response){if(!response.ok){throw new Error('Failed to update item');}console.log('Item updated successfully');setUpdatedItem({postDate:'',postBody:'',postImg:null});navigate('/UserProfile');}).catch(function(error){console.error(error);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"SignLogBox\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Update Item\"}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleUpdate,children:/*#__PURE__*/_jsxs(\"div\",{className:\"Column2\",children:[/*#__PURE__*/_jsx(\"ol\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Date:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"postDate\",value:updatedItem.postDate,onChange:handleInputChange})]})}),/*#__PURE__*/_jsx(\"ol\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Post Body:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"postBody\",value:updatedItem.postBody,onChange:handleInputChange})]})}),/*#__PURE__*/_jsx(\"ol\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Img:\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleImageUpload})]})}),/*#__PURE__*/_jsx(\"button\",{class:\"btn btn-primary w-100 py-2\",type:\"submit\",children:\"Update\"}),/*#__PURE__*/_jsx(\"p\",{class:\"mt-5 mb-3 text-body-secondary\",children:\"\\xA9 2017\\u20132023\"})]})})]});}export default Update;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","jsx","_jsx","jsxs","_jsxs","Update","_useParams","itemId","navigate","_useState","postDate","postBody","postImg","_useState2","_slicedToArray","updatedItem","setUpdatedItem","fetch","concat","then","response","json","data","catch","error","console","handleInputChange","e","_objectSpread","_defineProperty","target","name","value","handleImageUpload","imageFile","files","prevItem","handleUpdate","preventDefault","formData","FormData","append","method","body","ok","Error","log","className","children","onSubmit","type","onChange","accept","class"],"sources":["C:/Users/hjohnston/OneDrive - Neumont College of Computer Science/Documents/GitHub/WhendigoOccurances/react-whendigo-app/src/CRUD/Update.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\n\r\nfunction Update() {\r\n  const { itemId } = useParams();\r\n  const navigate = useNavigate();\r\n\r\n  const [updatedItem, setUpdatedItem] = useState({\r\n    postDate: '',\r\n    postBody: '',\r\n    postImg: null,\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetch(`http://localhost:3666/post/${itemId}`)\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        setUpdatedItem({\r\n          postDate: data.postDate,\r\n          postBody: data.postBody,\r\n          postImg: null,\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.error('Error fetching item data:', error);\r\n      });\r\n  }, [itemId]);\r\n\r\n  const handleInputChange = (e) => {\r\n    setUpdatedItem({ ...updatedItem, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleImageUpload = (e) => {\r\n    const imageFile = e.target.files[0];\r\n    setUpdatedItem((prevItem) => ({\r\n      ...prevItem,\r\n      postImg: imageFile,\r\n    }));\r\n  };\r\n\r\n  const handleUpdate = (e) => {\r\n    e.preventDefault();\r\n    const formData = new FormData();\r\n    formData.append('postDate', updatedItem.postDate);\r\n    formData.append('postBody', updatedItem.postBody);\r\n    formData.append('postImg', updatedItem.postImg);\r\n\r\n    fetch(`http://localhost:3666/post/update/${itemId}`, {\r\n      method: 'PUT',\r\n      body: formData,\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error('Failed to update item');\r\n        }\r\n        console.log('Item updated successfully');\r\n        setUpdatedItem({\r\n          postDate: '',\r\n          postBody: '',\r\n          postImg: null,\r\n        });\r\n        navigate('/UserProfile');\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className='SignLogBox'>\r\n      <h2>Update Item</h2>\r\n      <form onSubmit={handleUpdate}>\r\n        <div className='Column2'>\r\n\r\n            <ol>\r\n              <label>\r\n                Date:\r\n                <input type='text' name='postDate' value={updatedItem.postDate} onChange={handleInputChange}/>\r\n              </label>\r\n            </ol>\r\n            <ol>\r\n              <label>\r\n                Post Body:\r\n                <input type='text' name='postBody' value={updatedItem.postBody} onChange={handleInputChange}/>\r\n              </label>\r\n            </ol>\r\n            <ol>\r\n            <label>\r\n              Img:\r\n              <input type='file' accept='image/*' onChange={handleImageUpload}/>\r\n            </label>\r\n            </ol>\r\n        <button class=\"btn btn-primary w-100 py-2\" type=\"submit\">Update</button>\r\n        <p class=\"mt-5 mb-3 text-body-secondary\">© 2017–2023</p>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Update;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}