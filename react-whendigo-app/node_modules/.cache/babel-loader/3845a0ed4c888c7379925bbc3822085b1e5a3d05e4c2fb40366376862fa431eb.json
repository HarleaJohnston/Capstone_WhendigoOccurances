{"ast":null,"code":"import _defineProperty from\"C:/Users/hjohnston/OneDrive - Neumont College of Computer Science/Documents/GitHub/WhendigoOccurances/react-whendigo-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/hjohnston/OneDrive - Neumont College of Computer Science/Documents/GitHub/WhendigoOccurances/react-whendigo-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/hjohnston/OneDrive - Neumont College of Computer Science/Documents/GitHub/WhendigoOccurances/react-whendigo-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UpdateUser(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var navigate=useNavigate();var _useState3=useState({Bio:'',UserName:'',Img:null,Name:''}),_useState4=_slicedToArray(_useState3,2),updatedUser=_useState4[0],setUpdatedUser=_useState4[1];useEffect(function(){var userId=sessionStorage.getItem('userId');fetch(\"http://localhost:3666/user/\".concat(userId),{method:'GET',credentials:'include'}).then(function(response){return response.json();}).then(function(data){setUser(data);setUpdatedUser(data);}).catch(function(error){console.error('Error fetching user data:',error);});},[]);var handleInputChange=function handleInputChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setUpdatedUser(function(prevUser){return _objectSpread(_objectSpread({},prevUser),{},_defineProperty({},name,value));});};var handleImageUpload=function handleImageUpload(e){var imageFile=e.target.files[0];setUpdatedUser(function(prevUser){return _objectSpread(_objectSpread({},prevUser),{},{Img:imageFile});});};var handleUpdateClick=function handleUpdateClick(){var userId=sessionStorage.getItem('userId');var formData=new FormData();formData.append('Bio',updatedUser.Bio);formData.append('UserName',updatedUser.UserName);formData.append('Name',updatedUser.Name);formData.append('Img',updatedUser.Img);fetch(\"http://localhost:3666/user/\".concat(userId),{method:'PUT',body:formData,credentials:'include'}).then(function(response){return response.json();}).then(function(data){console.log('Updated user data:',data);setUser(data);navigate('/UserProfile');}).catch(function(error){console.error('Error updating user data:',error);});};return/*#__PURE__*/_jsx(\"div\",{className:\"Row\",children:user?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Update User\"}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Username:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"UserName\",value:updatedUser.UserName,onChange:handleInputChange})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Bio:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"Bio\",value:updatedUser.Bio,onChange:handleInputChange})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Profile Pic:\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleImageUpload})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Pronouns:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"Name\",value:updatedUser.Name,onChange:handleInputChange})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUpdateClick,children:\"Update\"})]}):/*#__PURE__*/_jsx(\"p\",{children:\"Loading user data...\"})});}export default UpdateUser;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","jsx","_jsx","jsxs","_jsxs","UpdateUser","_useState","_useState2","_slicedToArray","user","setUser","navigate","_useState3","Bio","UserName","Img","Name","_useState4","updatedUser","setUpdatedUser","userId","sessionStorage","getItem","fetch","concat","method","credentials","then","response","json","data","catch","error","console","handleInputChange","e","_e$target","target","name","value","prevUser","_objectSpread","_defineProperty","handleImageUpload","imageFile","files","handleUpdateClick","formData","FormData","append","body","log","className","children","type","onChange","accept","onClick"],"sources":["C:/Users/hjohnston/OneDrive - Neumont College of Computer Science/Documents/GitHub/WhendigoOccurances/react-whendigo-app/src/CRUD/UpdateUser.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction UpdateUser() {\r\n  const [user, setUser] = useState(null);\r\n  const navigate = useNavigate();\r\n  const [updatedUser, setUpdatedUser] = useState({\r\n    Bio: '',\r\n    UserName: '',\r\n    Img: null,\r\n    Name: '',\r\n  });\r\n\r\n  useEffect(() => {\r\n    const userId = sessionStorage.getItem('userId');\r\n    fetch(`http://localhost:3666/user/${userId}`, {\r\n      method: 'GET',\r\n      credentials: 'include',\r\n    })\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        setUser(data);\r\n        setUpdatedUser(data); \r\n      })\r\n      .catch(error => {\r\n        console.error('Error fetching user data:', error);\r\n      });\r\n  }, []);\r\n\r\n  const handleInputChange = e => {\r\n    const { name, value } = e.target;\r\n    setUpdatedUser(prevUser => ({\r\n      ...prevUser,\r\n      [name]: value,\r\n    }));\r\n  };\r\n\r\n  const handleImageUpload = e => {\r\n    const imageFile = e.target.files[0];\r\n    setUpdatedUser(prevUser => ({\r\n      ...prevUser,\r\n      Img: imageFile,\r\n    }));\r\n  };\r\n\r\n  const handleUpdateClick = () => {\r\n    const userId = sessionStorage.getItem('userId');\r\n    const formData = new FormData();\r\n    formData.append('Bio', updatedUser.Bio);\r\n    formData.append('UserName', updatedUser.UserName);\r\n    formData.append('Name', updatedUser.Name);\r\n    formData.append('Img', updatedUser.Img); \r\n\r\n    fetch(`http://localhost:3666/user/${userId}`, {\r\n      method: 'PUT',\r\n      body: formData, \r\n      credentials: 'include',\r\n    })\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        console.log('Updated user data:', data);\r\n        setUser(data);\r\n        navigate('/UserProfile');\r\n      })\r\n      .catch(error => {\r\n        console.error('Error updating user data:', error);\r\n      });\r\n\r\n  };\r\n\r\n  return (\r\n    <div className='Row'>\r\n      {user ? (\r\n        <div>\r\n          <h2>Update User</h2>\r\n          <label>\r\n            Username:\r\n          <input type='text' name='UserName' value={updatedUser.UserName} onChange={handleInputChange}/>\r\n          </label>\r\n          <label>\r\n            Bio:\r\n          <input type='text' name='Bio' value={updatedUser.Bio} onChange={handleInputChange}/>\r\n          </label>\r\n          <label>\r\n            Profile Pic:\r\n            <input type='file' accept='image/*' onChange={handleImageUpload} />\r\n          </label>\r\n          <label>\r\n            Pronouns:\r\n          <input type='text' name='Name' value={updatedUser.Name} onChange={handleInputChange}/>\r\n          </label>\r\n          <button onClick={handleUpdateClick}>Update</button>\r\n        </div>\r\n      ) : (\r\n        <p>Loading user data...</p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UpdateUser;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}